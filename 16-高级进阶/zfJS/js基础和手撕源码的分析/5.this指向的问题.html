<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
</head>

<body>
    <script>
        //this指向的问题
        //this指向的问题
        /*
         *this对象是执行上下文中的一个属性,它指向最后一次调用这个方法的对象
         this 的指向可以通过四种调用模式来判断。
函数调用，当一个函数不是一个对象的属性时，直接作为函数来调用时，this指向全局对象。
方法调用，如果一个函数作为一个对象的方法来调用时，this指向这个对象。
构造函数调用，this指向这个用new新创建的对象。
第四种是 apply 、 call 和 bind 调用模式，这三个方法都可以显示的指定调用函数的 this 指向。apply接收参数的是数组，call接受参数列表，`` bind方法通过传入一个对象，返回一个 this 绑定了传入对象的新函数。这个函数的 this指向除了使用new `时会被改变，其他情况下都不会改变。


         */

        var x = 3, //13
            obj = {
                x: 1,
            };
        obj.fn = (function() {
            this.x *= ++x;
            return function(y) {
                this.x++;
                console.log(this.x);
            };
        })();

        //此处执行的结果是将fn自执行返回的函数结果给了obj.fn
        //所以后面在进行obj.fn的时候,执行的是返回结果的值
        //js 表达式 ,
        var fn = obj.fn; //先执行自执行函数,再再赋值的时候执行
        obj.fn();
        // fn(4);
        obj.fn();
        // //
        console.log("obj,x", obj.x);
    </script>
</body>

</html>